import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Run Sample Applications

## ✅ Quick Start Checklist

- [x] Ubuntu 24.04 installed
- [x] Wi-Fi & SSH set up
- [x] HDMI display connected
- [x] Qualcomm PPA added
- [x] Weston display enabled

---
> 💡 Pro tip: Use a fan! These apps work your Pi hard..


## What You Can Run

- **Multimedia Apps:** Camera, display, video streaming  
- **AI Apps:** Object detection, parallel inferencing
- **Skill Level:** Anyone.  
- **Goal:** Get cool demos running, quick.
---

## Before You Start 
**Enable Weston Display**  
This unlocks camera + AI features.
```shell
sudo -i
export XDG_RUNTIME_DIR=/run/user/$(id -u ubuntu)
```
  :::note
  If Weston desktop doesn’t show:
Run: `sudo dpkg-reconfigure weston-autostart` command in the RUBIK Pi terminal.
   :::

To test the graphics, run the sample application. The following example runs the Weston-simple-egl:
   ```shell
   weston-simple-egl
   ```
## Run Sample applications
<Tabs>
   <TabItem value="Multimedia" label="Run Multimedia Sample Apps">
       The multimedia sample applications show various use cases for the camera, display, and video streaming capabilities of RUBIK Pi.
    <Tabs>
        <TabItem value="dashcam" label="Multi-camera streaming(dashcam)">
            ## Use Cases  
               - 🚗 Dashcam: Record front + rear views
               - 🤖 Stereo vision: Depth perception for robotics
               - 🛡️ Security: Monitor multiple zones at once           
                ---
            ##  What Does It Do?
            - **Composes** both camera feeds into a single display (side-by-side preview)
            - **Encodes** and saves video streams to files (for later playback or analysis)
            - Super useful for multi-cam setups: dashcam, stereo cam, security cam, etc.
        ```shell
            Camera0 --\
                        |--> [Composer] --> [Display or Encoder] --> [File/Screen]
            Camera1 --/
            ```
            ---
            > ### 💡 **Pro Tips**
            > - Make sure both cameras are connected and recognized by the system 
            > - HDMI must be plugged in for display output
            > - Use export GST_DEBUG=2 for troubleshooting 
            ---
   Install Camera Software:
    ```shell
    sudo sed -i &#x27;a deb http://apt.rubikpi.ai ppa main&#x27; /etc/apt/sources.list
    sudo apt update
    sudo apt install -y qcom-ib2c qcom-camera-server qcom-camx rubikpi3-cameras
    sudo chmod -R 755 /opt
    sudo mkdir -p /var/cache/camera/
    sudo touch /var/cache/camera/camxoverridesettings.txt
    sudo sh -c &#x27;echo enableNCSService=FALSE &gt;&gt; /var/cache/camera/camxoverridesettings.txt&#x27;
    ```
  Set Display Environment:
    ```shell
    export XDG_RUNTIME_DIR=/run/user/</span></span>(id -u ubuntu)/ && export WAYLAND_DISPLAY=wayland-1
    ```

:::note
If Weston isn’t auto-enabling,here’s the hack:  
Open **two SSH sessions** — one to wake up Weston, the other to launch your app.

**1. Fire up Weston (First Shell):**
```bash
export GBM_BACKEND=msm && export XDG_RUNTIME_DIR=/run/user/$(id -u ubuntu)/ && mkdir -p <span class="latex-inline"><span class="katex-error" title="ParseError: KaTeX parse error: Expected &#x27;EOF&#x27;, got &#x27;&amp;&#x27; at position 17: …DG_RUNTIME_DIR &amp;̲&amp; weston --cont…" style="color:#cc0000">XDG_RUNTIME_DIR &amp;&amp; weston --continue-without-input --idle-time=0
```
**2. Set the Wayland Display environment(Shell #2)
```bash
export XDG_RUNTIME_DIR=/run/user/</span></span>(id -u ubuntu)/ && export WAYLAND_DISPLAY=wayland-1
```
:::
Run Camera Example:
```bash
gst-multi-camera-example -o 0   # View on HDMI
gst-multi-camera-example -o 1   # Save to /opt/cam1_vid.mp4 & /opt/cam2_vid.mp4
```
Copy Videos to Host:
```bash
scp ubuntu@<DEVICE_IP>:/opt/cam1_vid.mp4 <destination>
```
Get Help:
```bash
gst-multi-camera-example --help
```
  🛑 Stop Playback  
        Ctrl + C
</TabItem>

 <TabItem value="Video Wall" label="Multichannel decode & Compose(Video wall)">

 ## Use Cases    
            - 🧑‍💻 Group video calls:** See everyone, all at once
            - 🛡️ **Security feeds:** Monitor multiple cameras together
            - 🖥️ **Digital signage:** Show dynamic info across screens
                
                ---
            ##  What Does It Do?
                    - Plays multiple MP4 (H.264) videos at once
                    - Tiles them together for a unified video wall display
                    - Works with 2, 4, 8, or 16 video streams
                    - Super simple commands—no deep setup needed
            ---
            > ### 💡 **Pro Tips**
            > - Start playback:
            ```shell
            gst-concurrent-videoplay-composition -c 4 -i /opt/video1.mp4 -i /opt/video2.mp4 -i /opt/video3.mp4 -i /opt/video4.mp4
            ```
            ---
Prep Your Device
```shell
sudo sed -i '<span class="latex-inline"><span class="katex-error" title="ParseError: KaTeX parse error: Expected group after &#x27;_&#x27; at position 370: …esettings.txt&#x27;
_̲_CODE_BLOCK_1__…" style="color:#cc0000">a deb http://apt.rubikpi.ai ppa main&#x27; /etc/apt/sources.list
sudo apt update
sudo apt install -y qcom-ib2c qcom-camera-server qcom-camx
sudo apt install -y rubikpi3-cameras
sudo chmod -R 755 /opt
sudo mkdir -p /var/cache/camera/
sudo touch /var/cache/camera/camxoverridesettings.txt
sudo sh -c &#x27;echo enableNCSService=FALSE &gt;&gt; /var/cache/camera/camxoverridesettings.txt&#x27;
```

Add Your Videos (H.264 MP4)
```shell
scp &lt;file_name&gt; ubuntu@[DEVICE IP-ADDR]:/opt/
```
Set Up Display
```shell
export XDG_RUNTIME_DIR=/run/user/</span></span>(id -u ubuntu)/
export WAYLAND_DISPLAY=wayland-1
```
:::note
If Weston isn’t auto-enabling,here’s the hack:  
Open **two SSH sessions** — one to wake up Weston, the other to launch your app.

**1. Fire up Weston (First Shell):**
```bash
export GBM_BACKEND=msm && export XDG_RUNTIME_DIR=/run/user/$(id -u ubuntu)/ && mkdir -p <span class="latex-inline"><span class="katex-error" title="ParseError: KaTeX parse error: Expected &#x27;EOF&#x27;, got &#x27;&amp;&#x27; at position 17: …DG_RUNTIME_DIR &amp;̲&amp; weston --cont…" style="color:#cc0000">XDG_RUNTIME_DIR &amp;&amp; weston --continue-without-input --idle-time=0
```
**2. Set the Wayland Display environment(Shell #2)
```bash
export XDG_RUNTIME_DIR=/run/user/</span></span>(id -u ubuntu)/ && export WAYLAND_DISPLAY=wayland-1
```
:::
 Play Multiple Videos!
 ```shell
 gst-concurrent-videoplay-composition -c 4 \
  -i /opt/<file1>.mp4 \
  -i /opt/<file2>.mp4 \
  -i /opt/<file3>.mp4 \
  -i /opt/<file4>.mp4
  ```
  🛑 Stop Playback  
        Ctrl + C
    </TabItem>
 </Tabs>
  </TabItem>
 </Tabs>